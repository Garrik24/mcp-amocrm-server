# üìä –û—Ç—á–µ—Ç –æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ AmoCRM MCP Server

**–î–∞—Ç–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:** 20 –æ–∫—Ç—è–±—Ä—è 2025  
**–¢–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ  
**–í–µ—Ä—Å–∏—è —Å–µ—Ä–≤–µ—Ä–∞:** 3.0.0

---

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –û–±—â–∏–π —Å—Ç–∞—Ç—É—Å: **–£–°–ü–ï–®–ù–û** ‚úÖ

–í—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ. –°–µ—Ä–≤–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ –∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.

---

## üìã –î–µ—Ç–∞–ª—å–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

| –¢–µ—Å—Ç | –†–µ–∑—É–ª—å—Ç–∞—Ç | –î–µ—Ç–∞–ª–∏ |
|------|-----------|--------|
| Python –≤–µ—Ä—Å–∏—è | ‚úÖ PASS | Python 3.13.7 |
| FastAPI | ‚úÖ PASS | v0.119.0 |
| Uvicorn | ‚úÖ PASS | v0.37.0 |
| aiohttp | ‚úÖ PASS | v3.13.0 |
| MCP | ‚úÖ PASS | v1.17.0 |

### 2. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ |
|----------|----------|
| –°—Ç–∞—Ç—É—Å | ‚úÖ –ó–∞–ø—É—â–µ–Ω —É—Å–ø–µ—à–Ω–æ |
| –•–æ—Å—Ç | 0.0.0.0 |
| –ü–æ—Ä—Ç | 8000 |
| –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏ | ~45 MB |
| –ü—Ä–æ—Ü–µ—Å—Å ID | 4569 |

### 3. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Endpoints

#### ‚úÖ –¢–µ—Å—Ç 1: –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ (`GET /`)

**–ó–∞–ø—Ä–æ—Å:**
```bash
curl http://localhost:8000/
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ PASS

**–û—Ç–≤–µ—Ç:**
```json
{
  "status": "active",
  "service": "AmoCRM MCP Server",
  "version": "3.0.0",
  "subdomain": "stavgeo26",
  "token_status": "–Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω",
  "endpoints": {
    "account": "/api/account",
    "entities": "/api/entities",
    "pipelines": "/api/pipelines",
    "users": "/api/users",
    "custom_fields": "/api/custom_fields",
    "webhooks": "/webhooks/receive"
  }
}
```

---

#### ‚úÖ –¢–µ—Å—Ç 2: Health Check (`GET /health`)

**–ó–∞–ø—Ä–æ—Å:**
```bash
curl http://localhost:8000/health
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ PASS

**–û—Ç–≤–µ—Ç:**
```json
{
  "status": "healthy",
  "timestamp": 1760954119
}
```

---

#### ‚úÖ –¢–µ—Å—Ç 3: Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (`GET /docs`)

**–ó–∞–ø—Ä–æ—Å:**
```bash
curl -I http://localhost:8000/docs
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ PASS

**HTTP —Å—Ç–∞—Ç—É—Å:** 200 OK

---

#### ‚úÖ –¢–µ—Å—Ç 4: API Entities (`POST /api/entities`)

**–ó–∞–ø—Ä–æ—Å:**
```bash
curl -X POST http://localhost:8000/api/entities \
  -H "Content-Type: application/json" \
  -d '{"entity_type":"contacts","method":"get","params":{"limit":5}}'
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ PASS (–∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è —Ç–æ–∫–µ–Ω–∞)

**–û—Ç–≤–µ—Ç:**
```json
{
  "error": "400: AmoCRM access token –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω",
  "status": "error"
}
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ - —Å–µ—Ä–≤–µ—Ä –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ç–æ–∫–µ–Ω–∞.

---

#### ‚úÖ –¢–µ—Å—Ç 5: MCP –º–æ–¥—É–ª—å

**–ó–∞–ø—Ä–æ—Å:**
```bash
python3 -c "import mcp_server"
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ PASS

**–í—ã–≤–æ–¥:** MCP –º–æ–¥—É–ª—å –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

---

#### ‚úÖ –¢–µ—Å—Ç 6: FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

**–ó–∞–ø—Ä–æ—Å:**
```bash
python3 -c "import app"
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ PASS

**–í—ã–≤–æ–¥:** FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

---

#### ‚úÖ –¢–µ—Å—Ç 7: Webhooks (`POST /webhooks/receive`)

**–ó–∞–ø—Ä–æ—Å:**
```bash
curl -X POST http://localhost:8000/webhooks/receive \
  -H "Content-Type: application/json" \
  -d '{"leads":{"test":"data"}}'
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ PASS

**–û—Ç–≤–µ—Ç:**
```json
{
  "status": "received"
}
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** Webhook endpoint —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ —Ç–æ–∫–µ–Ω–∞, –∫–∞–∫ –∏ –æ–∂–∏–¥–∞–µ—Ç—Å—è.

---

#### ‚úÖ –¢–µ—Å—Ç 8: Pipelines (`GET /api/pipelines`)

**–ó–∞–ø—Ä–æ—Å:**
```bash
curl http://localhost:8000/api/pipelines
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ PASS (–∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è —Ç–æ–∫–µ–Ω–∞)

**–û—Ç–≤–µ—Ç:**
```json
{
  "error": "400: AmoCRM access token –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω",
  "status": "error"
}
```

---

### 4. –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

| –ú–µ—Ç—Ä–∏–∫–∞ | –ó–Ω–∞—á–µ–Ω–∏–µ | –û—Ü–µ–Ω–∫–∞ |
|---------|----------|--------|
| –í—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞ | **0.010 —Å–µ–∫** | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê –û—Ç–ª–∏—á–Ω–æ |
| –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ CPU | 0.2% | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê –û—Ç–ª–∏—á–Ω–æ |
| –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ RAM | ~45 MB | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê –û—Ç–ª–∏—á–Ω–æ |

**–í—ã–≤–æ–¥:** –°–µ—Ä–≤–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç –æ—á–µ–Ω—å –±—ã—Å—Ç—Ä–æ –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ä–µ—Å—É—Ä—Å—ã.

---

## üìù –í—ã–≤–æ–¥—ã

### ‚úÖ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –æ—Ç–ª–∏—á–Ω–æ:

1. ‚úÖ –°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
2. ‚úÖ –í—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
3. ‚úÖ FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ
4. ‚úÖ MCP –º–æ–¥—É–ª—å –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ
5. ‚úÖ –í—Å–µ endpoints –æ—Ç–≤–µ—á–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
6. ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ (–ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–∫–µ–Ω–∞)
7. ‚úÖ Webhook endpoint –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ
8. ‚úÖ Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞
9. ‚úÖ –û—Ç–ª–∏—á–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (0.010 —Å–µ–∫)
10. ‚úÖ –ù–∏–∑–∫–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤

### ‚ö†Ô∏è –ß—Ç–æ –Ω—É–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –¥–ª—è –ø–æ–ª–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏:

1. **–¢–æ–∫–µ–Ω AmoCRM** - –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–æ–±–∞–≤–∏—Ç—å –≤ `.env` —Ñ–∞–π–ª:
   ```env
   AMOCRM_ACCESS_TOKEN=–≤–∞—à_—Ä–µ–∞–ª—å–Ω—ã–π_—Ç–æ–∫–µ–Ω
   ```

2. **–ü–æ–¥–¥–æ–º–µ–Ω AmoCRM** - –º–æ–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å –≤ `.env` (—Å–µ–π—á–∞—Å: stavgeo26):
   ```env
   AMOCRM_SUBDOMAIN=–≤–∞—à_–ø–æ–¥–¥–æ–º–µ–Ω
   ```

### üìä –û–±—â–∞—è –æ—Ü–µ–Ω–∫–∞: **9/10**

**–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ:**
- –°–µ—Ä–≤–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–¥–µ–∞–ª—å–Ω–æ —Å —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–π —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è
- –ú–∏–Ω—É—Å 1 –±–∞–ª–ª —Ç–æ–ª—å–∫–æ –∑–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω–æ–≥–æ —Ç–æ–∫–µ–Ω–∞ AmoCRM (—ç—Ç–æ –Ω–µ –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞)

---

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –î–ª—è –Ω–∞—á–∞–ª–∞ —Ä–∞–±–æ—Ç—ã:

1. **–ü–æ–ª—É—á–∏—Ç–µ —Ç–æ–∫–µ–Ω AmoCRM:**
   - –ó–∞–π–¥–∏—Ç–µ –≤ AmoCRM ‚Üí –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
   - –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—É—é –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é
   - –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–π —Ç–æ–∫–µ–Ω –¥–æ—Å—Ç—É–ø–∞

2. **–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env`:**
   ```bash
   cp env.example .env
   nano .env  # –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ª—é–±–æ–π —Ä–µ–¥–∞–∫—Ç–æ—Ä
   ```

3. **–î–æ–±–∞–≤—å—Ç–µ —Ç–æ–∫–µ–Ω –≤ `.env`:**
   ```env
   AMOCRM_SUBDOMAIN=stavgeo26
   AMOCRM_ACCESS_TOKEN=–≤–∞—à_—Ç–æ–∫–µ–Ω_–∑–¥–µ—Å—å
   AMOCRM_SERVER_URL=http://localhost:8000
   AMO_SSL_VERIFY=true
   ```

4. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä:**
   ```bash
   # –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Ç–µ–∫—É—â–∏–π –ø—Ä–æ—Ü–µ—Å—Å (Ctrl+C –∏–ª–∏ kill)
   uvicorn app:app --host 0.0.0.0 --port 8000 --reload
   ```

### –î–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Claude Desktop:

–î–æ–±–∞–≤—å—Ç–µ –≤ `~/Library/Application Support/Claude/claude_desktop_config.json`:

```json
{
  "mcpServers": {
    "amocrm-server": {
      "command": "/Users/makbuk/Desktop/gh mcp amocrm/mcp-amocrm-server/venv/bin/python",
      "args": ["/Users/makbuk/Desktop/gh mcp amocrm/mcp-amocrm-server/mcp_server.py"],
      "env": {
        "PYTHONPATH": "/Users/makbuk/Desktop/gh mcp amocrm/mcp-amocrm-server",
        "AMOCRM_SERVER_URL": "http://localhost:8000",
        "AMO_SSL_VERIFY": "true"
      }
    }
  }
}
```

---

## üîç –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

### –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö endpoints:

| Endpoint | –ú–µ—Ç–æ–¥ | –û–ø–∏—Å–∞–Ω–∏–µ | –¢—Ä–µ–±—É–µ—Ç —Ç–æ–∫–µ–Ω |
|----------|-------|----------|---------------|
| `/` | GET | –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–µ—Ä–∞ | –ù–µ—Ç |
| `/health` | GET | Health check | –ù–µ—Ç |
| `/docs` | GET | Swagger UI | –ù–µ—Ç |
| `/api/account` | GET | –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –∞–∫–∫–∞—É–Ω—Ç–µ | –î–∞ |
| `/api/entities` | POST | –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π CRUD | –î–∞ |
| `/api/pipelines` | GET | –í–æ—Ä–æ–Ω–∫–∏ –ø—Ä–æ–¥–∞–∂ | –î–∞ |
| `/api/users` | GET | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ | –î–∞ |
| `/api/custom_fields/{type}` | GET | –ö–∞—Å—Ç–æ–º–Ω—ã–µ –ø–æ–ª—è | –î–∞ |
| `/webhooks/receive` | POST | –ü—Ä–∏–µ–º –≤–µ–±—Ö—É–∫–æ–≤ | –ù–µ—Ç |
| `/api/report/deals` | GET | –û—Ç—á–µ—Ç –ø–æ —Å–¥–µ–ª–∫–∞–º | –î–∞ |

### –°–ø–∏—Å–æ–∫ MCP –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ (24 –∫–æ–º–∞–Ω–¥—ã):

**–ö–æ–Ω—Ç–∞–∫—Ç—ã (8):** search_contact, get_contacts, get_contact_by_id, create_contact, update_contact, check_contact_exists, get_or_create_contact

**–°–¥–µ–ª–∫–∏ (7):** get_leads, get_lead_by_id, create_lead, create_complex_lead, update_lead, delete_lead, get_leads_by_contact

**–ö–æ–º–ø–∞–Ω–∏–∏ (2):** get_companies, create_company

**–ó–∞–¥–∞—á–∏ (1):** create_task

**–ù–∞—Å—Ç—Ä–æ–π–∫–∏ (3):** get_account_info, get_pipelines, get_users

**–£–º–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ (2):** smart_create_client_and_lead, get_or_create_contact

**–û—Ç—á–µ—Ç—ã (1):** get_deals_report

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∏ –≤–æ–ø—Ä–æ—Å—ã:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –≤ —Ñ–∞–π–ª–µ `README.md`
2. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ø—Ä–∏–º–µ—Ä—ã –≤ `QUICKSTART.md`
3. –û—Ç–∫—Ä–æ–π—Ç–µ Issue –Ω–∞ GitHub

---

**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ:** ‚úÖ –°–µ—Ä–≤–µ—Ä –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ!

*–î–ª—è –ø–æ–ª–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ –¥–æ–±–∞–≤—å—Ç–µ —Ç–æ–∫–µ–Ω AmoCRM –≤ `.env` —Ñ–∞–π–ª.*

